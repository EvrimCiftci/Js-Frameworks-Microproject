<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Page</title>
    <link rel="stylesheet" href="/api.css">
</head>
<body> 
  
  <div class="container">
    <div class="header">
      <div class="left-header">
        <h1>
          Travelio
        </h1>
        <p>By Evrim , Om , Het</p>
      </div>
      <div class="mid-header">
  
      </div>
      <div class="right-header">
        <nav>
          <ul>
            <li><a href="home.html">H ome</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact us</a></li>
          </ul>
        </nav>
      </div>
      
    </div>
    <div id="returnedJSON"></div>
    <button id="getDataButton">Generate a destination☀️</button>
  </div>

   
</body>

<script>
    const btn = document.getElementById("getDataButton");
    btn.addEventListener("click", fetchData); // Attach click event listener to call fetchData
    


    async function fetchData(){
        fetch("http://localhost:3000/data")
  .then((response) => {
    if (!response.ok) {
      throw new Error(HTTP `error: ${response.status}`);
    }
    return response.json();
  })
  .then((data) => {
    let filteredData = data.map(item => ({
        city_name: item.city_name,
        country_name: item.country_name
    }));

    // Convert the filtered data to a JSON string and display it
    document.getElementById("returnedJSON").innerText = JSON.stringify(filteredData, null, 2);
    console.log(filteredData);
  })
  .catch((error) => {
    console.log(error);
  });
    }
</script>
</html>